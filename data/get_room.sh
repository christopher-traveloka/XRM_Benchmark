#!/usr/bin/env bash

# set -o noexec
# set -o verbose
# set -o xtrace
set -o nounset
set -o pipefail

trap ctrl_c INT
function ctrl_c() {
    echo "** User stopped the process with CTRL-C"
    exit 1
}

function set_error_handle() {
    set -o errexit #set -e
    # shellcheck disable=SC2154
    trap 'rc=$?; echo "return code $rc at line $LINENO"; exit $rc' ERR
}
#script_dir=$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd -P)
#
#exec 是 Shell 内置命令，它有两种用法，一种是执行 Shell 命令，一种是操作文件描述符。 使用 exec 命令可以永久性地重定向，后续命令的输入输出方向也被确定了，直到再次遇到 exec 命令才会改变重定向的方向
# exec > >(tee -ia script.log)
# exec 2> >(tee -ia scripterr.out)


curl -L "https://acdtool-be.acd.traveloka.com/api/v2/hotel/content/room/function" -H "accept: */*" -H "accept-language: en-US,en;q=0.9" -H "content-type: application/json" -H "origin: https://accom-dashboard.acd.traveloka.com" -H "priority: u=1, i" -H "referer: https://accom-dashboard.acd.traveloka.com/" -H "sec-ch-ua: \"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"" -H "sec-ch-ua-mobile: ?0" -H "sec-ch-ua-platform: \"macOS\"" -H "sec-fetch-dest: empty" -H "sec-fetch-mode: cors" -H "sec-fetch-site: same-site" -H "user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" -H "Cookie: tvl=WZeAsLU/+p+1gbNHoadMBbIwuhbV6z51rHb0B/PhHOSDgx7ICI3vfCHSHg2Qu20j5JegFtxTYKwU218KCJ3541Un5LuKMyfaKrCJIL8Yz2NO0RPzfAnl85lzkC1kesB/2rAnT3UlsprBH8O8pxbytT3Rv9zT5zsNOfg+1Q1ej5FrONCgEBDHHk2jiuXPfY27ioCfAxKVWHdbmlcKO759n6mx2Pyftbyd3CDH3h88mC9MLvyYuSTYufwOIR7M9ysnVgldg5PBEzF9L92npeEimcSf+1g7CWK9999e~djAy" --data-raw "{
    \"data\": {
        \"funcName\": \"getAccomRoomDetail\",
        \"param\": {
            \"hotelRoomId\": \"1021349082\"
        }
    },
    \"context\": {
        \"auth0Token\": \"eyJraWQiOiJYRGJhaHFMdXhRdUFDTHhMaXZoVkRjV2g2OXo2cXNsSndUUGdyWlQzNWswPSIsImFsZyI6IlJTMjU2In0.eyJodHRwczpcL1wvdHZsa1wvcGVybWlzc2lvbnMiOiJbXCJ2Omh0bGJrZ3RcIixcImU6aHRsYmRyclwiLFwiYzpia2dma29zeW5jXCIsXCJyOnB5bW50SW5mb1wiLFwiZDpybXZCa2dcIixcInI6YmtnTnRzXCIsXCJ1OnJlaW1iU2Jtc1wiLFwicjpia2dDaGdcIixcImU6aHRsYmRocmJrXCIsXCJ2OmJrZ2Zrb3N5bmNcIixcInY6aHRsYmRyclwiLFwicjpjdXN0SW5mb1wiLFwiZTpiY0FJXCIsXCJ2Omh0bGJkZ2l0XCIsXCJlOmh0bGJkY25pc2JrZ1wiLFwiZTpodGxiZGlwZVwiLFwicjpweW10U3JjaExpc3RcIixcInY6aHRsYmRxbmhzXCIsXCJ1OmJrZ050c1wiLFwidjpia2dycnNycXN0XCIsXCJDOlJpbWJCeXBzXCIsXCJlOmh0bGJkaHRsc2V0XCIsXCJ2Omh0bGJkaHRsaW5mb1wiLFwidjpodGxiZGNwdGJsXCIsXCJ1OmN1c3RJbmZvXCIsXCJyOmJjTHRcIixcImU6aHRsYmRjaGdpdG5cIixcInU6aHRsc3BjcmVxXCIsXCJlOmh0bGJkdXBkXCIsXCJlOmh0bGJkY2JrZ1wiLFwiZDpia2dycnNycXN0XCIsXCJ2Omh0bGJkY25pc2JrZ3JzXCIsXCJ2Omh0bGJkZ2ludmNcIixcImU6YmtncnJzcnFzdFwiLFwidjpodGxiZGdwclwiLFwidjpodGxiZGNoZ2luZm9cIixcImM6YmtncnJzcnFzdFwiLFwiZTpodGxzcGNyZXFcIixcImU6Y3J0cmZuZHB5bXRcIixcInI6YmtnT3RoXCIsXCJ2Omh0bGJkZ3BkXCIsXCJ2Omh0bGJkZ3B0XCIsXCJlOmh0bGJkY2hnaXRuaWRcIixcInI6cmVpbWJJbml0XCIsXCJ2Omh0bGJkZ2NyXCIsXCJ2Omh0bGJkcWhyc1wiLFwidjpodGxiZGdwZGZcIixcInY6aHRsYmRhY2xvZ1wiLFwiZDpia2dma29zeW5jXCIsXCJlOmJrZ2Zrb3N5bmNcIixcInY6aHRsYmRjb3B0YmxcIixcInY6aHRsYmRncGNcIixcInI6YmtnU3JjaExpc3RcIixcInI6cHRjTGlzdFwiLFwicjpia2dJbmZvXCIsXCJ2Omh0bHJzY2hkbFwiLFwidjpodGxyc2NoY2ZnXCIsXCJlOmh0bHJzY2hjZmdcIixcInY6aHRsY2tpblwiLFwiZTphaGdcIixcImQ6cHJkdGFscnRcIixcImU6aGNzXCIsXCJjOmNzYmhnXCIsXCJlOnByY3B0bnJ1bGVcIixcImU6Y250cm1wb21vZFwiLFwidjpwcmR0YWxydFwiLFwidjpybWR0bW5nbW50bFwiLFwidjpodGxncnBjZmdcIixcImQ6Y3NiaGdcIixcImU6cnBsb3lwdHNcIixcImVhOnNjcnBcIixcImU6cnBwcmVuXCIsXCJjOmNwbnJzdHJjdG5cIixcImQ6cHBsaGdcIixcInY6cHJzcmNoaW52XCIsXCJkOnBwbHRvb2xcIixcInY6YWN0TG9nXCIsXCJlOnBycmx3cnBcIixcInY6c2NycFwiLFwiYzpocHJ2aW5mXCIsXCJlOnByY3B0bmhnXCIsXCJ2OnBjb21cIixcImU6cHJjZHBoZ1wiLFwidjpwcmNkcGhnXCIsXCJjOmNvc2hnXCIsXCJjOnByY3B0bmhnXCIsXCJ2OmNzYmhnXCIsXCJlOmNkeW50bFwiLFwiZDpwcmFwY2JtXCIsXCJlOmZpZHJcIixcInY6Y250eHJtXCIsXCJ2OmFpbmNmZ1wiLFwiZDpjb3NvcFwiLFwidjpwcmNuZGFkalwiLFwiZTpwcnNyY2hpbnZcIixcImU6c2NycFwiLFwiZDpwcmNwdG5oZ1wiLFwidjpycGxveXB0c1wiLFwidjpocHJ2aW5mXCIsXCJkOmNvc2hnXCIsXCJ2OmlwZ2N0b29sXCIsXCJlOmNtc250YmxcIixcImU6aHRscm1kdFwiLFwiZTpwaGdhdVwiLFwidjpycGludmNcIixcImU6aHByY2Jya1wiLFwiZTpwcmNhY3NjZFwiLFwiZDphaGdcIixcImE6cHJjbmRhZGpcIixcInY6aW52bGdyXCIsXCJhOnNjcnBcIixcImM6aHJzXCIsXCJlOmhyc1wiLFwiZTppbnZjYWNpXCIsXCJlOmNvc2hnXCIsXCJ2OmNudHJtbW9kXCIsXCJlOmZ0dGdsXCIsXCJ2OmhwcmNicmtcIixcInY6YWhnXCIsXCJlOm1vZGludlwiLFwidjpoY3NcIixcImM6aHByY2Jya1wiLFwidjpwcnJsd3JwXCIsXCJlOnByY2J1ZG1ndFwiLFwidjpmdHRnbFwiLFwidjpwcGxoZ1wiLFwiZTpybWR0bW5nbW50bFwiLFwiZTpwcmNuZGFkalwiLFwidjpjbXNudGJsXCIsXCJlOnNjcnBtcHBuZ1wiLFwiZTpwcmJwZ1wiLFwidjpjcG5yc3RyY3RuXCIsXCJ2OnByY2FubXJsXCIsXCJ2OnB0dWNcIixcImU6aHBydmluZlwiLFwiZDpzY3JwbXBwbmdcIixcImU6cnBwcmljXCIsXCJlOnByZHRhbHJ0XCIsXCJ2OnJwc21ydHRyZ1wiLFwiZTpjcG5yc3RyY3RuXCIsXCJ2Omhyc1wiLFwidjpzbXJ0dGd0cmVjZ3JwXCIsXCJ2OnByYnBnXCIsXCJlOnJwaW52Y1wiLFwidjpjb3NoZ1wiLFwidjppbnZjYWNpXCIsXCJ2OnByY3B0bmhnXCIsXCJ2OnRyeGZycFwiLFwidjptb2RpbnZcIixcInY6cHJjYWNzY2RcIixcInY6cnBwcmljXCIsXCJkOnByY25kYWRqXCIsXCJlOmxuZG1rXCIsXCJkOmludmNhY2lcIixcImU6aHNwcHJ2XCIsXCJ2OmhzcHBydlwiLFwiYzpwcnNyY2hpbnZcIixcInY6cHJjbG9nXCIsXCJlOmlwZ2N0b29sXCIsXCJ2OnBwbHRvb2xcIixcImM6YWhnXCIsXCJlOnBoZ1wiLFwiZTpjbnR4cm1cIixcInY6cHJlYXRsXCIsXCJlOmNvc29wXCIsXCJjOnNjcnBcIixcInY6aGNwclwiLFwiZDpwcnNyY2hpbnZcIixcImQ6aHJzXCIsXCJkOnNjcnBcIixcInY6aW52bHNcIixcInY6c21ydHRndHNlZ3ByaW9yXCIsXCJ2OnByYXBjYm1cIixcImU6cHR1Y1wiLFwiZGE6c2NycFwiLFwidjpwcnJsY2JtXCIsXCJlOnNtcnR0Z3RzZWdwcmlvclwiLFwiYzpjb3NvcFwiLFwiYzpwcGx0b29sXCIsXCJ2OmNvc29wXCIsXCJ2OmZpZHJcIixcInY6cnBwcmVuXCIsXCJ2OnByY3B0bnJ1bGVcIixcImE6bG5kbWtcIixcImM6cGhnXCIsXCJkOmhwcnZpbmZcIixcImM6cHBsaGdcIixcImU6cHJlYXRsXCIsXCJkOnBoZ1wiLFwiZTp0cnhmcnBcIixcImU6c21ydHRndHJlY2dycFwiLFwiYzpwcmNuZGFkalwiLFwiYzpsbmRta1wiLFwiZDpmaWRyXCIsXCJ2Omh0bHJtZHRcIixcImM6cHJkdGFscnRcIixcImM6ZmlkclwiLFwiZTphaW5jZmdcIixcInY6Y250cm1wb21vZFwiLFwiZDpjcG5yc3RyY3RuXCIsXCJlOnBwbHRvb2xcIixcImU6cnBzbXJ0dHJnXCIsXCJ2OnBoZ1wiLFwiZTpwcGxoZ1wiLFwidjpzY3JwbXBwbmdcIixcImQ6aHByY2Jya1wiLFwidmE6c2NycFwiLFwidjpsbmRta1wiLFwidjpxY2tmbHRyXCIsXCJjOnJ2d3RnZ1wiLFwiZTpwdmRpbXBydGNmZ1wiLFwidjpwcnZkcmZ0Y2hcIixcInY6cWNrdGFiXCIsXCJlOmh0bHBwaWNrXCIsXCJlOnNwY2xwbGNcIixcInY6cnZ3ZHRcIixcImU6cnZ3bHN0XCIsXCJ2OmRtbmRiZWNmZ1wiLFwidjpodGxydndjcnRuXCIsXCJ2Omh0bHNyY2ZnXCIsXCJ2Omh0bGJkY2hncnBpXCIsXCJjOmFmZnJ0bG10clwiLFwiZTpodGxiZXRlZHRcIixcImM6cHZkaW1wcnRjZmdcIixcInY6cnBkaXNwXCIsXCJ2Omh0bGF0dHJcIixcImU6YWZmbHRjbW1zcnVsZVwiLFwiZTpwdmRpbXBydGV4ZVwiLFwidjpodGxkdFwiLFwiZTpodGxkdFwiLFwidjpibG5rdHBsY3lcIixcInY6aGxkYmtnY2ZnXCIsXCJkOmh0bGF0dHJcIixcImM6cWNrZmx0clwiLFwidjpwZ3JwdmNmZ1wiLFwidjpwYWh0cnRybFwiLFwidjpxY2tlbnRyeVwiLFwiZDpxY2tlbnRyeVwiLFwiYzpwcnNyY2h0aWVyXCIsXCJkOnByc3JjaHRpZXJcIixcInY6cHJzcmNodGllcmJuZnRcIixcImQ6YWZmcnRsbXRyXCIsXCJ2Omh0bHJua2dcIixcImU6aHRsZHRwZHRtcFwiLFwiZDpxY2t0YWJcIixcInY6YWZmbHRjbW1zcnVsZVwiLFwiZTpydndjdXJcIixcImM6aHRsYXR0clwiLFwidjpodGxjb252aGlzdFwiLFwidjpwaGdycG1hcFwiLFwiZDpydndkdFwiLFwidjpydndsc3RcIixcImU6YWZmbHRjbnRudHBkdFwiLFwidjpodGxwaG90b1wiLFwiYzpia2dmbGV4XCIsXCJlOmh0bG1yZ1wiLFwiZDpwdmRpbXBydGNmZ1wiLFwiZTpodGxwaG90b1wiLFwiZDpkbW5kYmVjZmdcIixcImU6YWZmcnRsbXRyXCIsXCJlOnJ2d21vZFwiLFwiYzpwdmRpbXBydGV4ZVwiLFwidjphZmZsdGNudG50cGR0XCIsXCJ2Omh0bGR0cGR0bXBcIixcInY6aHRsdHJwbXBcIixcImM6bWNwZ25wcm9cIixcImM6cWNrdGFiXCIsXCJlOmRtbmRiZWNmZ1wiLFwidjpwdmRpbXBydGNmZ1wiLFwiZTpycGRpc3BcIixcImU6aHRsYXR0clwiLFwiZTpydnd0Z2dcIixcInY6cHJzcmNodGllclwiLFwiZTpodGxybmtnXCIsXCJ2OnJ2d2N1clwiLFwidjpia2dyZmRycXN0XCIsXCJlOmJsbmt0cGxjeVwiLFwiZDpwdmRpbXBydGV4ZVwiLFwiZTpodGxzcmNmZ1wiLFwiZTpwcnNyY2h0aWVyYm5mdFwiLFwidjptY3BnbnByb1wiLFwidjphZmZydGxtdHJcIixcInY6cHZkaW1wcnRleGVcIixcImQ6bWNwZ25wcm9cIixcInY6YWZmbHRwcmNcIixcImU6ZG1kYmVzdm1jZmdcIixcInY6ZG1kYmVzdm1jZmdcIixcImU6cWNrZW50cnlcIixcInY6cnZ3dGdnXCIsXCJkOmh0bHJua2dcIixcInY6cnZ3bW9kXCIsXCJlOm1jcGducHJvXCIsXCJjOnFja2VudHJ5XCIsXCJkOnJ2d3RnZ1wiLFwiZTpobGRia2djZmdcIixcImQ6cWNrZmx0clwiLFwiZTpodGx0cnBtcFwiLFwidjpodGxwcGlja1wiLFwiYTpxY2tmbHRyXCIsXCJlOnFja3RhYlwiLFwiYzpodGxybmtnXCIsXCJjOnJ2d2R0XCIsXCJ2Omh0bGJldFwiLFwiZTpydndkdFwiLFwidjpzcGNscGxjXCIsXCJ2Omh0bG1yZ1wiLFwiZTpwcnNyY2h0aWVyXCIsXCJlOnFja2ZsdHJcIixcInY6YmtncmZkZmVlXCIsXCJjOmRtbmRiZWNmZ1wiXSIsImF0X2hhc2giOiJFT3c5cHY4ZlFVMTByWEl4U0EzaTB3IiwiaHR0cHM6XC9cL3R2bGtcL2dyb3VwcyI6IltcIlByaWNpbmcgRW5naW5lZXJcIixcIkFjY29tIEVuZ2luZWVyXCIsXCJIb3RlbCBSZXNjaGVkdWxlICAtIEZ1bGwgQWNjZXNzXCIsXCJIb3RlbCBCb29raW5nIEZldGNoIFRvb2xcIixcIkJvb2tpbmcgRGV0YWlsIC0gRnVsbCBBY2Nlc3NcIixcIkhvdGVsIENoZWNrIEluIFRvb2wgLSBWaWV3IE9ubHlcIl0iLCJzdWIiOiI1YWQyYzFlMC04NzM4LTQwZjUtYTdkMS01ZThjMGRjYjg4ZTAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5hcC1zb3V0aGVhc3QtMS5hbWF6b25hd3MuY29tXC9hcC1zb3V0aGVhc3QtMV9OVHJZb2g5WnUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDIwY2YxOTktNjNhNy00MTk5LTk4Y2QtN2M4NWRkODg1OTRhIiwiaHR0cHM6XC9cL3R2bGtcL2NvbXByZXNzaW9uLW1ldGhvZCI6Im5vbmUiLCJodHRwczpcL1wvdHZsa1wvdXNlci1tZXRhZGF0YSI6Int9Iiwibm9uY2UiOiJlbFZ3ZUdGRWIwRnFibkEzWVRCb2JYSjNiMVo1VkVKTWJUWjRWMk5zZURSNVNIbDNhRlJXWldaSU5RPT0iLCJvcmlnaW5fanRpIjoiYjgyNjljYTEtMDU3YS00MjFmLTk5YTMtN2I0N2M2ZDhhMDdiIiwiYXVkIjoiNGNubTYyZ3ZrZ29zNTBwZzhqZHZjOWswaDYiLCJpZGVudGl0aWVzIjpbeyJ1c2VySWQiOiIxMTY4MTc5MzEyNjQwNTUwMTA4NjEiLCJwcm92aWRlck5hbWUiOiJHb29nbGUiLCJwcm92aWRlclR5cGUiOiJHb29nbGUiLCJpc3N1ZXIiOm51bGwsInByaW1hcnkiOiJmYWxzZSIsImRhdGVDcmVhdGVkIjoiMTY4MDY4MjQxMzM5MCJ9XSwidG9rZW5fdXNlIjoiaWQiLCJodHRwczpcL1wvdHZsa1wvc2lkIjoiZTFhMDI1OTgtMjJlNi00ZTkxLWFhNmItNjBkNTQyMjk0OGNlIiwiYXV0aF90aW1lIjoxNzU2MzYyNzU0LCJuYW1lIjoiRWR5IEV2YW4iLCJodHRwczpcL1wvdHZsa1wvYXBwIjoiYWNkLWFjY29tLWRhc2hib2FyZCIsImV4cCI6MTc1NjM2NjM1NCwiaWF0IjoxNzU2MzYyNzU1LCJqdGkiOiJiMTBiMWVlNi0xNzBkLTQwNzMtYTliOS00OTcxOWIwYWQ2MmIiLCJlbWFpbCI6ImVkeS5ldmFuQHRyYXZlbG9rYS5jb20ifQ.PZBV8HKpT9fqbUtzkdklwI-vHkovCb96pA2FoM9WdC4TUhY5P6aQ3tFQl-RX7UpuO7NJM3DXQ8_eE0q1LEUGaBgYS5QI4-pvGCx-4X5o69G-ALuUw5ukh14_EfviDZ_tepWIF0OCtCLAYHpMua-69Oc81FK62xwXqbxgqvQYe5o-NMIneou0zETEfXoXdQlm__4IK_vvbXJmubRZwF0QDcfIHsabnwTesy4s4k1QRVRTxsVnVIOaByUFdhdb83YsAXnHW_9IsP-dYHpgJEnujfbZj-2zJodcH9xkmsC6ywWqzmNM9h0H9X9AzgMhKjwql6gz-hzMjmIejbQ1qtEweA\",
        \"username\": \"edy.evan@traveloka.com\"
    },
    \"fields\": [],
    \"clientInterface\": \"desktop\"
}"
