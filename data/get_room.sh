#!/usr/bin/env bash

# set -o noexec
# set -o verbose
# set -o xtrace
set -o nounset
set -o pipefail

trap ctrl_c INT
function ctrl_c() {
    echo "** User stopped the process with CTRL-C"
    exit 1
}

function set_error_handle() {
    set -o errexit #set -e
    # shellcheck disable=SC2154
    trap 'rc=$?; echo "return code $rc at line $LINENO"; exit $rc' ERR
}
#script_dir=$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd -P)
#
#exec 是 Shell 内置命令，它有两种用法，一种是执行 Shell 命令，一种是操作文件描述符。 使用 exec 命令可以永久性地重定向，后续命令的输入输出方向也被确定了，直到再次遇到 exec 命令才会改变重定向的方向
# exec > >(tee -ia script.log)
# exec 2> >(tee -ia scripterr.out)


curl -L "https://acdtool-be.acd.traveloka.com/api/v2/hotel/content/room/function" -H "accept: */*" -H "accept-language: en-US,en;q=0.9" -H "content-type: application/json" -H "origin: https://accom-dashboard.acd.traveloka.com" -H "priority: u=1, i" -H "referer: https://accom-dashboard.acd.traveloka.com/" -H "sec-ch-ua: \"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"" -H "sec-ch-ua-mobile: ?0" -H "sec-ch-ua-platform: \"macOS\"" -H "sec-fetch-dest: empty" -H "sec-fetch-mode: cors" -H "sec-fetch-site: same-site" -H "user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" -H "Cookie: tvl=WZeAsLU/+p+1gbNHoadMBbIwuhbV6z51rHb0B/PhHOSDgx7ICI3vfCHSHg2Qu20j5JegFtxTYKwU218KCJ3541Un5LuKMyfaKrCJIL8Yz2NO0RPzfAnl85lzkC1kesB/2rAnT3UlsprBH8O8pxbytT3Rv9zT5zsNOfg+1Q1ej5FrONCgEBDHHk2jiuXPfY27ioCfAxKVWHdbmlcKO759n6mx2Pyftbyd3CDH3h88mC9MLvyYuSTYufwOIR7M9ysnVgldg5PBEzF9L92npeEimcSf+1g7CWK9999e~djAy" --data-raw "{
    \"data\": {
        \"funcName\": \"getAccomRoomDetail\",
        \"param\": {
            \"hotelRoomId\": \"1008678107\"
        }
    },
    \"context\": {
        \"auth0Token\": \"eyJraWQiOiJYRGJhaHFMdXhRdUFDTHhMaXZoVkRjV2g2OXo2cXNsSndUUGdyWlQzNWswPSIsImFsZyI6IlJTMjU2In0.eyJodHRwczpcL1wvdHZsa1wvcGVybWlzc2lvbnMiOiJbXCJlOnN0cnBoXCIsXCJ2OnN0cnBoXCIsXCJlOmNkeW50bFwiLFwiZTpzc3RvcnlcIixcImM6c3N0b3J5XCIsXCJ2OnNzdG9yeVwiLFwiZDpzc3RvcnlcIixcImU6Y250cm1wb21vZFwiLFwidjpybWR0bW5nbW50bFwiLFwidjpodGxncnBjZmdcIixcInY6cWNrZmx0clwiLFwiYzpydnd0Z2dcIixcImU6cHZkaW1wcnRjZmdcIixcImM6Y3BucnN0cmN0blwiLFwidjpwcnZkcmZ0Y2hcIixcInY6cHJzcmNoaW52XCIsXCJ2OmFjdExvZ1wiLFwidjpwY29tXCIsXCJ2OnFja3RhYlwiLFwiZTpodGxwcGlja1wiLFwiZTpwcmNkcGhnXCIsXCJlOnNwY2xwbGNcIixcInY6cHJjZHBoZ1wiLFwiYzpjb3NoZ1wiLFwidjpydndkdFwiLFwiZTpydndsc3RcIixcInY6Y250eHJtXCIsXCJkOmNvc29wXCIsXCJ2OmRtbmRiZWNmZ1wiLFwidjpodGxydndjcnRuXCIsXCJkOmNvc2hnXCIsXCJ2Omh0bHNyY2ZnXCIsXCJ2Omh0bGJkY2hncnBpXCIsXCJjOmFmZnJ0bG10clwiLFwiZTpodGxiZXRlZHRcIixcImM6cHZkaW1wcnRjZmdcIixcImU6cGhnYXVcIixcInY6cnBkaXNwXCIsXCJ2Omh0bGF0dHJcIixcImU6YWZmbHRjbW1zcnVsZVwiLFwiYzpocnNcIixcImU6aHJzXCIsXCJlOnB2ZGltcHJ0ZXhlXCIsXCJ2Omh0bGR0XCIsXCJlOmludmNhY2lcIixcImU6aHRsZHRcIixcInY6Ymxua3RwbGN5XCIsXCJlOmNvc2hnXCIsXCJ2OmNudHJtbW9kXCIsXCJ2OmhsZGJrZ2NmZ1wiLFwiZDpodGxhdHRyXCIsXCJjOnFja2ZsdHJcIixcInY6cGdycHZjZmdcIixcInY6cGFodHJ0cmxcIixcInY6cWNrZW50cnlcIixcImQ6cWNrZW50cnlcIixcImM6cHJzcmNodGllclwiLFwiZDpwcnNyY2h0aWVyXCIsXCJ2OnByc3JjaHRpZXJibmZ0XCIsXCJkOmFmZnJ0bG10clwiLFwidjpodGxybmtnXCIsXCJlOnJtZHRtbmdtbnRsXCIsXCJlOmh0bGR0cGR0bXBcIixcImQ6cWNrdGFiXCIsXCJ2OmFmZmx0Y21tc3J1bGVcIixcImU6cnZ3Y3VyXCIsXCJjOmh0bGF0dHJcIixcImU6cHJicGdcIixcInY6aHRsY29udmhpc3RcIixcInY6cGhncnBtYXBcIixcInY6Y3BucnN0cmN0blwiLFwidjpodGxia2d0XCIsXCJkOnJ2d2R0XCIsXCJlOmNwbnJzdHJjdG5cIixcInY6cnZ3bHN0XCIsXCJlOmFmZmx0Y250bnRwZHRcIixcInY6aHRscGhvdG9cIixcImM6YmtnZmxleFwiLFwiZTpodGxtcmdcIixcImQ6cHZkaW1wcnRjZmdcIixcImU6aHRscGhvdG9cIixcInY6aHJzXCIsXCJkOmRtbmRiZWNmZ1wiLFwidjpwcmJwZ1wiLFwiZTphZmZydGxtdHJcIixcInY6Y29zaGdcIixcInY6aW52Y2FjaVwiLFwidjptb2RpbnZcIixcImU6cnZ3bW9kXCIsXCJjOnB2ZGltcHJ0ZXhlXCIsXCJ2OmFmZmx0Y250bnRwZHRcIixcImU6bG5kbWtcIixcImQ6aW52Y2FjaVwiLFwidjpodGxkdHBkdG1wXCIsXCJ2Omh0bHRycG1wXCIsXCJjOm1jcGducHJvXCIsXCJjOnFja3RhYlwiLFwiZTpjbnR4cm1cIixcImU6Y29zb3BcIixcImU6ZG1uZGJlY2ZnXCIsXCJ2OnB2ZGltcHJ0Y2ZnXCIsXCJlOnJwZGlzcFwiLFwiZTpodGxhdHRyXCIsXCJlOnJ2d3RnZ1wiLFwidjpwcnNyY2h0aWVyXCIsXCJlOmh0bHJua2dcIixcInY6cnZ3Y3VyXCIsXCJ2OmJrZ3JmZHJxc3RcIixcImQ6aHJzXCIsXCJlOmJsbmt0cGxjeVwiLFwiZDpwdmRpbXBydGV4ZVwiLFwidjppbnZsc1wiLFwiZTpodGxzcmNmZ1wiLFwiZTpwcnNyY2h0aWVyYm5mdFwiLFwidjptY3BnbnByb1wiLFwidjphZmZydGxtdHJcIixcInY6cHZkaW1wcnRleGVcIixcImQ6bWNwZ25wcm9cIixcInY6YWZmbHRwcmNcIixcImU6ZG1kYmVzdm1jZmdcIixcInY6ZG1kYmVzdm1jZmdcIixcImM6Y29zb3BcIixcImU6cWNrZW50cnlcIixcInY6cnZ3dGdnXCIsXCJkOmh0bHJua2dcIixcInY6cnZ3bW9kXCIsXCJ2OmNvc29wXCIsXCJlOm1jcGducHJvXCIsXCJjOnFja2VudHJ5XCIsXCJhOmxuZG1rXCIsXCJkOnJ2d3RnZ1wiLFwiZTpobGRia2djZmdcIixcImQ6cWNrZmx0clwiLFwiZTpodGx0cnBtcFwiLFwiYzpsbmRta1wiLFwidjpodGxwcGlja1wiLFwiYTpxY2tmbHRyXCIsXCJlOnFja3RhYlwiLFwiYzpodGxybmtnXCIsXCJjOnJ2d2R0XCIsXCJ2Omh0bGJldFwiLFwidjpjbnRybXBvbW9kXCIsXCJkOmNwbnJzdHJjdG5cIixcImU6cnZ3ZHRcIixcInY6c3BjbHBsY1wiLFwidjpodGxtcmdcIixcImU6cHJzcmNodGllclwiLFwiZTpxY2tmbHRyXCIsXCJ2OmJrZ3JmZGZlZVwiLFwidjpsbmRta1wiLFwiYzpkbW5kYmVjZmdcIl0iLCJhdF9oYXNoIjoiT0p2Q2QwRmxxV3NEY21FS2REZnVGUSIsImh0dHBzOlwvXC90dmxrXC9ncm91cHMiOiJbXCJTdG9yeSBQcm9kdWN0aW9uIEhvdXNlIC0gRnVsbCBBY2Nlc3NcIixcIkFjY29tIEVuZ2luZWVyXCIsXCJTbmFwc2hvdCBWaWRlbyBUb29sIC0gRnVsbCBBY2Nlc3NcIl0iLCJzdWIiOiJhMGIxZWU2ZS02ZTk2LTQ3YTgtYjJmMC1lY2I2YTY2MzhiZGEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5hcC1zb3V0aGVhc3QtMS5hbWF6b25hd3MuY29tXC9hcC1zb3V0aGVhc3QtMV9OVHJZb2g5WnUiLCJjb2duaXRvOnVzZXJuYW1lIjoiOWI1NjZjNjMtZjQxNy00YjIwLTk1YWQtNmZhMTUxZGVlZjZiIiwiaHR0cHM6XC9cL3R2bGtcL2NvbXByZXNzaW9uLW1ldGhvZCI6Im5vbmUiLCJodHRwczpcL1wvdHZsa1wvdXNlci1tZXRhZGF0YSI6Int9Iiwibm9uY2UiOiJNMEkwTkdSSmEyWkphMmhYTWxCUVNXdHBURFE0ZEZocWREUlNWVGRsZDFsM2JISmxSMXBIY1ZkUlp3PT0iLCJvcmlnaW5fanRpIjoiOGU1Y2Q5MTMtMzNiYS00ZTRmLThhOGMtMTJjZWJkOGIxMzQ2IiwiYXVkIjoiNGNubTYyZ3ZrZ29zNTBwZzhqZHZjOWswaDYiLCJpZGVudGl0aWVzIjpbeyJ1c2VySWQiOiIxMDgyNTc2MTE4MzQ5ODcyNDk1NzYiLCJwcm92aWRlck5hbWUiOiJHb29nbGUiLCJwcm92aWRlclR5cGUiOiJHb29nbGUiLCJpc3N1ZXIiOm51bGwsInByaW1hcnkiOiJmYWxzZSIsImRhdGVDcmVhdGVkIjoiMTc1MjA0OTM1OTQ5NSJ9XSwidG9rZW5fdXNlIjoiaWQiLCJodHRwczpcL1wvdHZsa1wvc2lkIjoiM2MyM2JlODktMTVkNS00YjU4LWI5OGMtNTA0MzIwZDU0MmRjIiwiYXV0aF90aW1lIjoxNzU2MzY4NzM3LCJuYW1lIjoiQ2hyaXN0b3BoZXIgSHUiLCJodHRwczpcL1wvdHZsa1wvYXBwIjoiYWNkLWFjY29tLWRhc2hib2FyZCIsImV4cCI6MTc1NjM3MjMzNywiaWF0IjoxNzU2MzY4NzM3LCJqdGkiOiI5NzBiYmM3Yi05Mjk2LTRjNDktODg0YS0yNWM1ZGM5YWRiYTEiLCJlbWFpbCI6ImNocmlzdG9waGVyLmh1QHRyYXZlbG9rYS5jb20ifQ.t8035RkwsCoMIOOIP86fJb92SMJqmB8Z9jzoFQxmboskT2Y9IrnH9Zr3CKQgJ4RyEBsdcNihs8_XdIWyRHNEIenVAA1JoHV6c5_r-Ltlw3yu9sA8HfCjeftYnffKl3alHLWzchdqMgVX8uIAAJq3Kiq5buN7AIisrI1AZ56X_hE3e_vsArhD7MTzGp6ZLV1eBz3CA4_IcdWpwJwipgLWTG50JYQGQn3tHf166Y7bMRufxqfV5wbeh_3q-DUZUCwrVqynfrpWR4lErLcf1AYdJaRMcD-_C58dXB7jVSVBZQrBkddOuN0GikXCzay_HTTqEHPpnl5Y5qyxijqLvpzVFQ\",
        \"username\": \"edy.evan@traveloka.com\"
    },
    \"fields\": [],
    \"clientInterface\": \"desktop\"
}"

